<!DOCTYPE html>
<html lang="en"> 
<head>
<meta name="viewport" content="width=device-width, initial-scale=1" charset="utf-8"/>
<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/jquery.mobile-1.4.5.css">

<script src="js/libs/jquery-1.11.2.min.js"></script>
<script src="js/libs/fabmo.js"></script>
<script src="js/libs/simplify.js"></script>

<script src="js/main.js"></script>
<script src="js/default_sketch.js"></script>
<script src="js/make.js"></script>
<script src="js/draw.js"></script>
<script src="js/smooth.js"></script>

    <script type="text/javascript">
        var fabmo = new FabMoDashboard();
    </script>

	<script>
		$(document).on("mobileinit", function() {
			console.log("mobileinit")
		});
	</script>

	<script>
	    $(document).bind('mobileinit',function(){
	        $.mobile.changePage.defaults.changeHash = false;
	        $.mobile.hashListeningEnabled = false;
	        $.mobile.pushStateEnabled = false;
	    });
	</script> 

<script src="js/libs/jquery.mobile-1.4.5.js"></script>

</head>

<body onload="clear();">

<canvas id="myCanvas"></canvas>

<div class='submitContainer'>
    <input id="input_submit" type="button" value="CUT!" onclick="make()"/>
</div>

<img class="clear-icon" src="css/trash.png">
<img class="menu-icon" src="css/menu.png">
<div class="inputContainer">
    <label for="gloss">Gloss</label>
    <input type="number" name="gloss" class="gloss" id="gloss" placeholder="Gloss" value="3" min="0" max = "10" step="1"/>
    <label for="width">Canvas Width (X)</label>
    <input type="number" name="width" class="width" placeholder="Canvas Width (X)" value="4"/>
    <label for="width">Canvas Height (Y)</label>
    <input type="number" name="height"class="height" placeholder="Canvas Height (Y)" value="3"/>
    <label for="width">Cut Depth</label>
    <input type="number" name="depth"class="depth"  placeholder="Cut Depth" value="-0.04"/>
</div>
<script>

var SizeX = $('.width').val()
var SizeY = $('.height').val()
var CutDepth = $('.depth').val()

$('.width').change(function(){
    SizeX = $('.width').val()
})

$('.height').change(function(){
    SizeY = $('.height').val()
})

$('.depth').change(function(){
    CutDepth = $('.depth').val()
})

$('.inputContainer').data('open', 'false')

$("#myCanvas").bind('vmousedown', function(e) {
	e.preventDefault()
	if($('.inputContainer').data('open')=='true'){
		$('.inputContainer').css('right', '-1000px')
		$('.inputContainer').data('open', 'false')
		draw()
	}
	if(animation == true){
		turnOffAnimation()
	}

	if($('.inputContainer').data('open')=='false'){
		points.push([])
		ctx.strokeStyle = "#4169e1"
		points[points.length-1].push({x:e.clientX,y:e.clientY})
		sketch=true
	}
	
})

$("#myCanvas").bind('vmousemove', function(e) {
	e.preventDefault()
	if((sketch==true) && (typeof e.clientX != 'undefined')) {
				
		if(points[points.length-1].length==1){
			ctx.beginPath()
			ctx.moveTo(e.clientX,e.clientY)
		}		
		ctx.lineTo(e.clientX,e.clientY)
	   points[points.length-1].push({x:e.clientX,y:e.clientY})
	   ctx.stroke()

	}

})


$("#myCanvas").bind('vmouseup', function(e) {
	e.preventDefault()
	if(sketch==true) {
		sketch=false
		makeSmooth()
	}
})

$('.menu-icon').click(function(){
    if ($('.inputContainer').data('open')== 'true'){
        $('.inputContainer').css('right', '-1000px')
        $('.inputContainer').data('open', 'false')
		  draw()
    } else {
        $('.inputContainer').css('right', '10px')
        $('.inputContainer').data('open', 'true')
		  draw()
    }
})

$('.clear-icon').click(function(){
    clear()
})

$(window).resize(function(){
	clear()
})

</script>


</body>
</html>

